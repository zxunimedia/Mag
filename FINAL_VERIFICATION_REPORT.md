# 文化部原村計畫管考系統 - 功能需求核實報告

**核實日期**: 2026-02-01  
**核實人員**: AI 助理  
**專案倉庫**: https://github.com/zxunimedia/Mag

---

## 一、需求來源整理

根據客戶對話截圖，整理出以下需求清單：

### 1. 撥付進度相關需求

| 編號 | 需求描述 | 實現狀態 | 備註 |
|-----|---------|---------|-----|
| 1.1 | 撥款期數、公文寄出日期、入帳日期表格 | ✅ 已實現 | GrantProgress.tsx |
| 1.2 | 公文寄出日期前加檢核文件確認 | ✅ 已實現 | 每期有獨立文件清單 |
| 1.3 | 第一期檢核：補助契約書、切結書、第一期款收據 | ✅ 已實現 | STAGE_DOCUMENTS[0] |
| 1.4 | 第二期檢核：修正對照表、修正計畫書、自行檢核表、第二期款收據 | ✅ 已實現 | STAGE_DOCUMENTS[1] |
| 1.5 | 第三期檢核：期中成果報告書、第一期與第二期款經費明細表、第三期款收據 | ✅ 已實現 | STAGE_DOCUMENTS[2] |
| 1.6 | 第四期檢核：全案期末成果報告書、全案執行經費明細表、第三期與第四期款經費明細表、第四期款收據 | ✅ 已實現 | STAGE_DOCUMENTS[3] |
| 1.7 | 文件狀態選項：未上傳、已收到、已退回、已完成 | ✅ 已實現 | DOC_STATUS_OPTIONS |
| 1.8 | 文化部收訖狀態：未收到、已收到、待補件、已退回、已完成 | ✅ 已實現 | MOC_STATUS_OPTIONS |
| 1.9 | 已退回或待補件時可寫備註說明 | ✅ 已實現 | expandedRemarkDoc 功能 |

### 2. 輔導紀錄相關需求

| 編號 | 需求描述 | 實現狀態 | 備註 |
|-----|---------|---------|-----|
| 2.1 | 新增訪視重點欄位 | ✅ 已實現 | keyPoints 欄位 |
| 2.2 | 訪視照片上傳（至少四張） | ✅ 已實現 | 支援實際上傳和刪除 |
| 2.3 | 輔導紀錄可編輯（不只新增） | ✅ 已實現 | handleOpenEdit 功能 |
| 2.4 | 出席人員勾選（輔導委員、主責人員、計畫代表人、計畫聯絡人、其他） | ✅ 已實現 | attendees 物件 |
| 2.5 | 整體訪視結果（進度、內容、紀錄、憑證） | ✅ 已實現 | overallResults 物件 |

### 3. 計畫基本資料相關需求

| 編號 | 需求描述 | 實現狀態 | 備註 |
|-----|---------|---------|-----|
| 3.1 | 計畫代表人（姓名、職稱、電話、手機、email） | ✅ 已實現 | ContactSection 組件 |
| 3.2 | 計畫聯絡人（姓名、職稱、電話、手機、email） | ✅ 已實現 | ContactSection 組件 |
| 3.3 | 立案地址、聯絡地址 | ✅ 已實現 | legalAddress, contactAddress |
| 3.4 | 實施地點（類型：原鄉/都市，可新增多個） | ✅ 已實現 | siteType, sites 陣列 |
| 3.5 | 申請金額、核定金額 | ✅ 已實現 | appliedAmount, approvedAmount |
| 3.6 | 輔導委員資訊 | ✅ 已實現 | commissioner 物件 |
| 3.7 | 主責人員資訊 | ✅ 已實現 | chiefStaff 物件 |

### 4. 月報填報相關需求

| 編號 | 需求描述 | 實現狀態 | 備註 |
|-----|---------|---------|-----|
| 4.1 | 月報卡片排列：進度填報 → 支出明細 → 輔導紀錄回應 | ✅ 已實現 | ProjectExecutionControl.tsx |
| 4.2 | 「建立日期」改成「檢送日期」 | ✅ 已實現 | submissionDate |
| 4.3 | 側邊「經費預算」改成「經費支出」 | ✅ 已實現 | Sidebar.tsx |
| 4.4 | 單位回應顏色區分 | ✅ 已實現 | amber 色系背景 |

### 5. 帳號管理相關需求

| 編號 | 需求描述 | 實現狀態 | 備註 |
|-----|---------|---------|-----|
| 5.1 | 帳號管理刪除功能 | ✅ 已實現 | AccountManagement.tsx |

### 6. 權限控制需求

| 編號 | 需求描述 | 實現狀態 | 備註 |
|-----|---------|---------|-----|
| 6.1 | 各單位只看到自己的計畫 | ✅ 已實現 | visibleProjects 過濾 |
| 6.2 | 文化部可看到所有計畫 | ✅ 已實現 | isAdmin 判斷 |

---

## 二、待實現功能（未來迭代）

以下功能在客戶對話中提及，但需要更多規格確認或後端支援：

| 編號 | 功能描述 | 優先級 | 備註 |
|-----|---------|-------|-----|
| F1 | 輔導紀錄匯出 Word/PDF | 中 | 需要後端 API 支援 |
| F2 | 報表生成與預警功能 | 中 | 需要定義預警規則 |
| F3 | 資料匯入到另一個系統（Power Automate 對接） | 低 | 需要目標系統 API |
| F4 | 計畫編號由系統設定 | 低 | 需要編號規則定義 |

---

## 三、技術架構說明

### 前端技術棧
- **框架**: React 18 + TypeScript
- **建置工具**: Vite 6.4
- **樣式**: TailwindCSS
- **圖標**: Lucide React

### 主要組件結構
```
/components
├── AccountManagement.tsx   # 帳號管理
├── CoachingRecords.tsx     # 輔導紀錄
├── Dashboard.tsx           # 儀表板
├── DataMigration.tsx       # 資料遷移
├── GrantProgress.tsx       # 撥付進度
├── Login.tsx               # 登入頁面
├── ProjectDetail.tsx       # 計畫詳情
├── ProjectExecutionControl.tsx  # 月報填報
├── ProjectForm.tsx         # 計畫表單
└── ProjectList.tsx         # 計畫清單
```

### 資料類型定義
- `types.ts` 包含所有 TypeScript 介面定義
- 支援完整的計畫、輔導紀錄、撥付進度資料結構

---

## 四、部署狀態

- **GitHub 倉庫**: https://github.com/zxunimedia/Mag
- **最新提交**: 2c7460a
- **建置狀態**: ✅ 成功
- **臨時預覽**: https://3000-ixxvq0uzdw595x94e4sug-436be0ff.sg1.manus.computer

### 正式部署建議
1. **Vercel 部署**（推薦）
   - 連接 GitHub 倉庫
   - 自動 CI/CD
   - 支援自訂網域

2. **GitHub Pages 部署**
   - 需要設定 base 路徑
   - 需要 GitHub Actions workflow

---

## 五、核實結論

根據客戶對話截圖中的需求，**主要功能已全部實現**：

✅ 撥付進度：各期檢核文件清單、公文寄出日期、入帳日期、備註功能  
✅ 輔導紀錄：訪視重點、照片上傳、編輯功能  
✅ 計畫資料：完整聯絡人資訊、地址、金額欄位  
✅ 月報填報：正確的卡片排列順序、單位回應顏色區分  
✅ 帳號管理：刪除功能  
✅ 權限控制：各單位/文化部權限區分  

**建議下一步**：
1. 請客戶登入 Vercel 完成正式部署
2. 確認自訂網域設定
3. 進行使用者驗收測試
